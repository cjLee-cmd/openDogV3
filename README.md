# OpenDog V3 Quadruped Robot

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![Raspberry Pi](https://img.shields.io/badge/platform-Raspberry%20Pi-red.svg)](https://www.raspberrypi.org/)

OpenDog V3ëŠ” Arduino C++ ì½”ë“œë¥¼ Pythonìœ¼ë¡œ ì™„ì „ ë³€í™˜í•œ 4ì¡± ë³´í–‰ ë¡œë´‡ì…ë‹ˆë‹¤. ì‹¤ì‹œê°„ ì—­ê¸°êµ¬í•™ ì œì–´, IMU ê¸°ë°˜ ì•ˆì •ì„± ì œì–´, ë¬´ì„  ì›ê²© ì œì–´ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## ğŸ¯ ì£¼ìš” íŠ¹ì§•

- **ì‹¤ì‹œê°„ ì œì–´**: 100Hz ì œì–´ ë£¨í”„ë¡œ ì •ë°€í•œ ëª¨ì…˜ ì œì–´
- **ëª¨ë“ˆì‹ ì•„í‚¤í…ì²˜**: ë…ë¦½ì ì´ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ êµ¬ì„± ìš”ì†Œ
- **í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸**: ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ ë° í•˜ë“œì›¨ì–´ ì§„ë‹¨
- **ë¬´ì„  í†µì‹ **: nRF24L01 ê¸°ë°˜ ì›ê²© ì œì–´
- **ì•ˆì •ì„± ì œì–´**: IMU ì„¼ì„œë¥¼ í™œìš©í•œ ë™ì  ê· í˜• ìœ ì§€
- **ë‹¤ì–‘í•œ ë³´í–‰ íŒ¨í„´**: íŠ¸ë¡¯, ì›Œí¬, ë°”ìš´ë“œ ë³´í–‰ ì§€ì›

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
openDogV3/
â”œâ”€â”€ Code/
â”‚   â”œâ”€â”€ openDogV3_experimental_stability/    # ë©”ì¸ Python êµ¬í˜„
â”‚   â”‚   â”œâ”€â”€ opendog_v3_controller.py         # ë©”ì¸ ë¡œë´‡ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ kinematics.py                    # ì—­ê¸°êµ¬í•™ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ odrive_interface.py              # ODrive ëª¨í„° ì œì–´
â”‚   â”‚   â”œâ”€â”€ imu_interface.py                 # IMU ì„¼ì„œ ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ input_processing.py              # ì…ë ¥ ì²˜ë¦¬ ë° ë³´í–‰ íŒ¨í„´
â”‚   â”‚   â”œâ”€â”€ remote_controller.py             # ë¬´ì„  ì›ê²© ì œì–´ê¸°
â”‚   â”‚   â”œâ”€â”€ config.py                        # ì„¤ì • ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ test_suite.py                    # ì¢…í•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸
â”‚   â”‚   â””â”€â”€ hardware_setup.py                # í•˜ë“œì›¨ì–´ ì„¤ì • ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ openDogV3/                          # ì›ë³¸ Arduino ì½”ë“œ
â”‚   â””â”€â”€ Remote/                             # ì›ê²© ì œì–´ê¸° Arduino ì½”ë“œ
â”œâ”€â”€ CAD/                                    # 3D ëª¨ë¸ ë° ì„¤ê³„ íŒŒì¼
â”œâ”€â”€ MANUAL.md                               # ìƒì„¸ í”„ë¡œê·¸ë¨ ë§¤ë‰´ì–¼ (í•œêµ­ì–´)
â”œâ”€â”€ MANUAL_EN.md                            # ìƒì„¸ í”„ë¡œê·¸ë¨ ë§¤ë‰´ì–¼ (English)
â”œâ”€â”€ BOM.ods                                 # ë¶€í’ˆ ëª…ì„¸ì„œ
â””â”€â”€ README.md                               # ì´ íŒŒì¼
```

## ğŸ› ï¸ í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­

### ë©”ì¸ ì‹œìŠ¤í…œ
- **Raspberry Pi 4 Model B** (4GB+ ê¶Œì¥)
- **ODrive ëª¨í„° ì»¨íŠ¸ë¡¤ëŸ¬** v3.6 (2ê°œ)
- **ë¸ŒëŸ¬ì‹œë¦¬ìŠ¤ DC ëª¨í„°** 8ê°œ (ê° ë‹¤ë¦¬ë‹¹ 2ê°œ)
- **IMU ì„¼ì„œ** (MPU6050 ë˜ëŠ” í˜¸í™˜)
- **nRF24L01 ë¬´ì„  ëª¨ë“ˆ**

### ì›ê²© ì œì–´ê¸°
- **Raspberry Pi Zero W** ë˜ëŠ” Pi 4
- **20x4 LCD ë””ìŠ¤í”Œë ˆì´** (I2C)
- **ì¡°ì´ìŠ¤í‹± ë° ë²„íŠ¼** (ì•„ë‚ ë¡œê·¸/ë””ì§€í„¸ ì…ë ¥)
- **nRF24L01 ë¬´ì„  ëª¨ë“ˆ**

### ì „ì› ì‹œìŠ¤í…œ
- **24V ë¦¬íŠ¬ í´ë¦¬ë¨¸ ë°°í„°ë¦¬** (6S, 5000mAh+)
- **ì „ì› ë¶„ë°° ë³´ë“œ**
- **BMS (ë°°í„°ë¦¬ ê´€ë¦¬ ì‹œìŠ¤í…œ)**

## ğŸ’» ì†Œí”„íŠ¸ì›¨ì–´ ìš”êµ¬ì‚¬í•­

- **Raspberry Pi OS** (Bullseye ì´ìƒ)
- **Python 3.8+**
- **í•„ìˆ˜ íŒ¨í‚¤ì§€**:
  ```
  numpy>=1.21.0
  odrive>=0.6.0
  pyserial>=3.5
  RPi.GPIO>=0.7.1
  smbus2>=0.4.1
  spidev>=3.5
  circuitpython-nrf24l01>=1.2.3
  ```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì„¤ì¹˜

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone <repository-url> opendog_v3
cd opendog_v3

# ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
python3 -m venv opendog_env
source opendog_env/bin/activate

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ê¶Œí•œ ì„¤ì •
sudo usermod -a -G gpio,spi,i2c,dialout $USER
```

### 2. í•˜ë“œì›¨ì–´ ì„¤ì •

```bash
cd Code/openDogV3_experimental_stability

# í•˜ë“œì›¨ì–´ ì§„ë‹¨ ë° ì„¤ì •
python3 hardware_setup.py

# IMU ìº˜ë¦¬ë¸Œë ˆì´ì…˜
python3 -c "
from hardware_setup import HardwareSetup
setup = HardwareSetup()
setup.calibrate_imu()
"
```

### 3. ë¡œë´‡ ì‹¤í–‰

```bash
# ë©”ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì‹œì‘
python3 opendog_v3_controller.py

# ì›ê²© ì œì–´ê¸° ì‹œì‘ (ë³„ë„ í„°ë¯¸ë„)
python3 remote_controller.py
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

### ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
python3 test_suite.py
```

### ê°œë³„ êµ¬ì„± ìš”ì†Œ í…ŒìŠ¤íŠ¸
```bash
# ì—­ê¸°êµ¬í•™ í…ŒìŠ¤íŠ¸
python3 -c "from test_suite import TestSuite; TestSuite().test_kinematics()"

# ëª¨í„° ì œì–´ í…ŒìŠ¤íŠ¸
python3 -c "from test_suite import TestSuite; TestSuite().test_odrive_interface()"

# IMU í…ŒìŠ¤íŠ¸
python3 -c "from test_suite import TestSuite; TestSuite().test_imu_interface()"
```

## ğŸ“Š ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

ì‹œìŠ¤í…œì€ ë‹¤ìŒ ì„±ëŠ¥ ëª©í‘œë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤:

- **ì œì–´ ì£¼ê¸°**: 10ms (100Hz)
- **ì—­ê¸°êµ¬í•™ ê³„ì‚°**: <1ms
- **ë¬´ì„  í†µì‹  ì§€ì—°**: <5ms
- **IMU ì—…ë°ì´íŠ¸**: 1kHz
- **ë°°í„°ë¦¬ ìˆ˜ëª…**: 30-60ë¶„ (ì‚¬ìš©ëŸ‰ì— ë”°ë¼)

## ğŸ® ì œì–´ ëª¨ë“œ

### ëª¨ë“œ 1: ìˆ˜ë™ ì œì–´
- ê°œë³„ ë‹¤ë¦¬ ìœ„ì¹˜ ì§ì ‘ ì œì–´
- í…ŒìŠ¤íŠ¸ ë° ìº˜ë¦¬ë¸Œë ˆì´ì…˜ì— ì í•©

### ëª¨ë“œ 2: ë³´í–‰ ì œì–´
- ìë™ ë³´í–‰ íŒ¨í„´ (íŠ¸ë¡¯, ì›Œí¬, ë°”ìš´ë“œ)
- ë°©í–¥ ë° ì†ë„ ëª…ë ¹ìœ¼ë¡œ ì œì–´

### ëª¨ë“œ 3: ìì„¸ ì œì–´
- ì •ì  ìì„¸ ìœ ì§€
- ëª¸ì²´ ë¡¤, í”¼ì¹˜, ìš” ì œì–´

### ëª¨ë“œ 4: ê· í˜• ì œì–´
- IMU í”¼ë“œë°± ê¸°ë°˜ ë™ì  ê· í˜•
- PID ì œì–´ ì•Œê³ ë¦¬ì¦˜

## ğŸ”§ ì„¤ì •

ì£¼ìš” ì„¤ì •ì€ `config.py`ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤:

```python
# ì œì–´ ë§¤ê°œë³€ìˆ˜
CONTROL_FREQUENCY = 100  # Hz
SAFETY_TIMEOUT = 1.0     # seconds

# ê¸°êµ¬í•™ ë§¤ê°œë³€ìˆ˜
LEG_LENGTH_1 = 110  # mm
LEG_LENGTH_2 = 120  # mm
BODY_WIDTH = 160    # mm
BODY_LENGTH = 280   # mm

# ì•ˆì „ ì œí•œ
MAX_MOTOR_CURRENT = 20  # A
MAX_MOTOR_VELOCITY = 50 # rad/s
```

## ğŸ“– ìƒì„¸ ë¬¸ì„œ

ì™„ì „í•œ ì„¤ì¹˜, ì„¤ì •, ìš´ì˜ ê°€ì´ë“œëŠ” ë‹¤ìŒ ë§¤ë‰´ì–¼ì„ ì°¸ì¡°í•˜ì„¸ìš”:

- [ğŸ“š í”„ë¡œê·¸ë¨ ë§¤ë‰´ì–¼ (í•œêµ­ì–´)](MANUAL.md) - í¬ê´„ì ì¸ ì„¤ì¹˜ ë° ìš´ì˜ ê°€ì´ë“œ
- [ğŸ“š Program Manual (English)](MANUAL_EN.md) - Comprehensive installation and operation guide

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### ODrive ì—°ê²° ì‹¤íŒ¨
```bash
# ì‹œë¦¬ì–¼ í¬íŠ¸ í™•ì¸
ls -la /dev/ttyACM*

# ê¶Œí•œ ì¶”ê°€
sudo usermod -a -G dialout $USER
```

#### IMU ì½ê¸° ì‹¤íŒ¨
```bash
# I2C ì¥ì¹˜ ìŠ¤ìº”
i2cdetect -y 1

# IMU ì¬ì´ˆê¸°í™”
python3 hardware_setup.py
```

#### ì„±ëŠ¥ ë¬¸ì œ
```bash
# ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ í™•ì¸
htop
free -h

# í”„ë¡œì„¸ìŠ¤ ìš°ì„ ìˆœìœ„ ì¡°ì •
sudo renice -10 $(pgrep python3)
```

ìì„¸í•œ ë¬¸ì œ í•´ê²° ê°€ì´ë“œëŠ” [ë§¤ë‰´ì–¼](MANUAL.md#ë¬¸ì œ-í•´ê²°)ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ”„ ê°œë°œ ë¡œë“œë§µ

- [x] Arduino C++ ì½”ë“œë¥¼ Pythonìœ¼ë¡œ ë³€í™˜
- [x] ëª¨ë“ˆì‹ ì•„í‚¤í…ì²˜ êµ¬í˜„
- [x] ì›ê²© ì œì–´ê¸° ì‹œìŠ¤í…œ
- [x] ì¢…í•© í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸
- [x] í•˜ë“œì›¨ì–´ ì„¤ì • ìœ í‹¸ë¦¬í‹°
- [ ] ì›¹ ê¸°ë°˜ ì œì–´ ì¸í„°í˜ì´ìŠ¤
- [ ] ì»´í“¨í„° ë¹„ì „ í†µí•©
- [ ] ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ë³´í–‰ ìµœì í™”
- [ ] ROS í†µí•©

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ê¸°ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤! ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì°¸ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **ë²„ê·¸ ë¦¬í¬íŠ¸**: Issues íƒ­ì—ì„œ ë²„ê·¸ë¥¼ ë³´ê³ í•´ì£¼ì„¸ìš”
2. **ê¸°ëŠ¥ ìš”ì²­**: ìƒˆë¡œìš´ ê¸°ëŠ¥ì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ì œì•ˆí•´ì£¼ì„¸ìš”
3. **ì½”ë“œ ê¸°ì—¬**: Pull Requestë¥¼ í†µí•´ ì½”ë“œë¥¼ ê¸°ì—¬í•´ì£¼ì„¸ìš”
4. **ë¬¸ì„œ ê°œì„ **: ë¬¸ì„œì˜ ê°œì„ ì‚¬í•­ì„ ì œì•ˆí•´ì£¼ì„¸ìš”

## ğŸ“„ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ™ ê°ì‚¬ì˜ ë§

- **ì›ë³¸ OpenDog í”„ë¡œì íŠ¸** - ê¸°ë³¸ í•˜ë“œì›¨ì–´ ì„¤ê³„ ë° ì•„ì´ë””ì–´
- **XRobots** - ì˜ê°ê³¼ ì»¤ë®¤ë‹ˆí‹° ì§€ì›: https://www.youtube.com/playlist?list=PLpwJoq86vov8uTgd8_WNgBHFpDYemO-OJ
- **ODrive íŒ€** - ë›°ì–´ë‚œ ëª¨í„° ì»¨íŠ¸ë¡¤ëŸ¬
- **Raspberry Pi ì¬ë‹¨** - ê°•ë ¥í•œ SBC í”Œë«í¼

---

## ì›ë³¸ Arduino ë²„ì „ ì •ë³´

### ì—”ì½”ë” ì„¤ì •
AS5047 ì—”ì½”ë”ë¥¼ ì ˆëŒ€ ìœ„ì¹˜ ëª¨ë“œë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. ODrive ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì—¬ ì—”ì½”ë” ë§¤ê°œë³€ìˆ˜ë¥¼ êµ¬ì„±í•˜ê³  ì˜¤í”„ì…‹ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ì„¸ìš”: https://docs.odriverobotics.com/v/latest/encoders.html

ODrive ë„êµ¬ ë‚´ì—ì„œ vel_limit ë° vel_limit_toleranceë¥¼ math.infë¡œ ì„¤ì •í•˜ì—¬ íŠ¹ì • ìƒí™©ì—ì„œ ëª¨í„°ê°€ ë¹„í™œì„±í™”ë˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤. (ODrive ë„êµ¬ì—ì„œ ë¨¼ì € 'import math'ë¥¼ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤)

### ì›ë³¸ ë©”ë‰´ ì˜µì…˜ (Arduino ë²„ì „)
0) ê¸°ë³¸ê°’ / ì „ì› ì¼œê¸° ì‹œ ê¸°ë³¸ê°’
1) ëª¨í„°ë¥¼ íì‡„ ë£¨í”„ ì œì–´ë¡œ ì„¤ì •
2) ë‹¤ë¦¬ë¥¼ ë°”ê¹¥ìª½ìœ¼ë¡œ ì´ë™í•˜ì—¬ ìŠ¤íƒ ë“œ ìŠ¤í„°ëŸ½ì„ 1-2mm ì •ë„ í´ë¦¬ì–´
3) ì–´ê¹¨ì™€ ë¬´ë¦ ê´€ì ˆì´ ëª¨ë‘ 45ë„ê°€ ë˜ë„ë¡ ë‹¤ë¦¬ ì´ë™ (CADì— í‘œì‹œëœ ê¸°ë³¸ ìœ„ì¹˜)
4) ëª¨í„° ìœ„ì¹˜, ì†ë„ ë° ì ë¶„ê¸° ê²Œì¸ ì¦ê°€
5) 6ì¶• ë³€í™˜ ë° íšŒì „ì„ ìœ„í•œ ì—­ê¸°êµ¬í•™ ë°ëª¨ ëª¨ë“œ
6) ë³´í–‰ ëª¨ë“œ (5ì™€ ë™ì¼í•œ ë‹¤ë¦¬ ìœ„ì¹˜)
10) ë°œì„ ìŠ¤íƒ ë“œ ìŠ¤í„°ëŸ½ì— ë†“ì´ë„ë¡ ë‹¤ì‹œ ìœ„ì¹˜ì‹œí‚´

### í•˜ë“œì›¨ì–´ ì œì‘ ì •ë³´

**ì›ê²© ì œì–´ê¸°**: 'reverse' ìŠ¤ìœ„ì¹˜ê°€ ìˆì–´ 4ê°œ ì¶•ì„ ì—­ë°©í–¥ìœ¼ë¡œ ë§Œë“¤ì–´ ë¡œë´‡ì´ ë’¤ë¡œ ê±¸ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì€ ë¡œë´‡ì˜ ê¸°êµ¬í•™ì´ ì•„ë‹Œ ì›ê²© ì œì–´ê¸°ì—ì„œ ì²˜ë¦¬ë©ë‹ˆë‹¤. ë˜í•œ ë¡œë´‡ì´ ì‘ë™í•˜ë ¤ë©´ ì¼œì ¸ ìˆì–´ì•¼ í•˜ëŠ” ëª¨í„° í™œì„±í™” ìŠ¤ìœ„ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤.

**ë°œ**: ì‹¤ë¦¬ì½˜ ê³ ë¬´ ë°œì„ ìœ„í•œ ë°œ ëª°ë“œ CADê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 25A Shore ê²½ë„ í”Œë˜í‹°ë„˜ ê²½í™” ì‹¤ë¦¬ì½˜ì„ ì•ˆë£Œì™€ í•¨ê»˜ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. íƒ„ì†Œ ì„¬ìœ  ë°œ íŠœë¸Œê°€ í•˜ë¶€ ë‹¤ë¦¬ì™€ ë°œ ì¸ì„œíŠ¸ì— ì ‘ì°©ë˜ì–´ íšŒì „ì„ ë°©ì§€í•œë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”.

**3D í”„ë¦°íŒ…**: ë¶€í’ˆì€ ëª¨ë‘ PLAë¡œ í”„ë¦°íŒ…ë©ë‹ˆë‹¤. í° ë¶€í’ˆì€ 0.3mm ë ˆì´ì–´ ë†’ì´ì—ì„œ 3ê°œ ë‘˜ë ˆë¡œ ì•½ 15% ì±„ì›€ë¥ ì…ë‹ˆë‹¤. ì‚¬ì´í´ë¡œì´ë‹¬ ë“œë¼ì´ë¸Œ ë‚´ë¶€ì™€ ê°™ì€ ì‘ì€ ë¶€í’ˆì€ 4ê°œ ë‘˜ë ˆì™€ ìµœëŒ€ 30-40% ì±„ì›€ë¥ ì…ë‹ˆë‹¤.

---

*OpenDog V3 - Pythonìœ¼ë¡œ êµ¬í˜„ëœ ì°¨ì„¸ëŒ€ 4ì¡± ë³´í–‰ ë¡œë´‡*
